{"remainingRequest":"C:\\Users\\mmak\\KJSP\\kwproductsapp\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\mmak\\KJSP\\kwproductsapp\\src\\store\\index.js","dependencies":[{"path":"C:\\Users\\mmak\\KJSP\\kwproductsapp\\src\\store\\index.js","mtime":1607631751979},{"path":"C:\\Users\\mmak\\KJSP\\kwproductsapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\mmak\\KJSP\\kwproductsapp\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFZ1ZXggZnJvbSAndnVleCc7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7ClZ1ZS51c2UoVnVleCk7CmV4cG9ydCBkZWZhdWx0IG5ldyBWdWV4LlN0b3JlKHsKICBzdGF0ZTogewogICAgc3RhdHVzOiAnJywKICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKSB8fCAnJywKICAgIHVzZXI6IHt9LAogICAgcGFnZW51bTogJzEnLAogICAgbnVtcGFnZXM6ICcwJwogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBhdXRoX3JlcXVlc3Q6IGZ1bmN0aW9uIGF1dGhfcmVxdWVzdChzdGF0ZSkgewogICAgICBzdGF0ZS5zdGF0dXMgPSAnbG9hZGluZyc7CiAgICB9LAogICAgYXV0aF9zdWNjZXNzOiBmdW5jdGlvbiBhdXRoX3N1Y2Nlc3Moc3RhdGUsIHRva2VuLCB1c2VyKSB7CiAgICAgIHN0YXRlLnN0YXR1cyA9ICdzdWNjZXNzJzsKICAgICAgc3RhdGUudG9rZW4gPSB0b2tlbjsKICAgICAgc3RhdGUudXNlciA9IHVzZXI7CiAgICB9LAogICAgYXV0aF9lcnJvcjogZnVuY3Rpb24gYXV0aF9lcnJvcihzdGF0ZSkgewogICAgICBzdGF0ZS5zdGF0dXMgPSAnZXJyb3InOwogICAgfSwKICAgIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KHN0YXRlKSB7CiAgICAgIHN0YXRlLnN0YXR1cyA9ICcnOwogICAgICBzdGF0ZS50b2tlbiA9ICcnOwogICAgfSwKICAgIHVwZGF0ZVBhZ2VOdW06IGZ1bmN0aW9uIHVwZGF0ZVBhZ2VOdW0oc3RhdGUsIG51bSkgewogICAgICBjb25zb2xlLmxvZyhudW0pOwogICAgICBzdGF0ZS5wYWdlbnVtID0gbnVtOwogICAgfSwKICAgIHVwZGF0ZVBhZ2VDb3VudDogZnVuY3Rpb24gdXBkYXRlUGFnZUNvdW50KHN0YXRlLCBwYWdlY291bnQpIHsKICAgICAgY29uc29sZS5sb2cocGFnZWNvdW50KTsKICAgICAgc3RhdGUubnVtcGFnZXMgPSBwYWdlY291bnQ7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICBsb2dpbjogZnVuY3Rpb24gbG9naW4oX3JlZiwgdXNlcikgewogICAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgY29tbWl0KCdhdXRoX3JlcXVlc3QnKTsKICAgICAgICBheGlvcyh7CiAgICAgICAgICB1cmw6ICdodHRwczovL2dyYXNwZXJhcGkuYXp1cmV3ZWJzaXRlcy5uZXQvYXBpL3YxL1VzZXJzL2F1dGhlbnRpY2F0ZScsCiAgICAgICAgICBkYXRhOiB1c2VyLAogICAgICAgICAgbWV0aG9kOiAnUE9TVCcKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgICB2YXIgdG9rZW4gPSByZXNwLmRhdGEudG9rZW47CiAgICAgICAgICB2YXIgdXNlciA9IHJlc3AuZGF0YS51c2VyOwogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgdG9rZW4pOyAvLyBBZGQgdGhlIGZvbGxvd2luZyBsaW5lOgoKICAgICAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSB0b2tlbjsKICAgICAgICAgIGNvbW1pdCgnYXV0aF9zdWNjZXNzJywgdG9rZW4sIHVzZXIpOwogICAgICAgICAgcmVzb2x2ZShyZXNwKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICBjb21taXQoJ2F1dGhfZXJyb3InKTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpOwogICAgICAgICAgcmVqZWN0KGVycik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIHJlZ2lzdGVyOiBmdW5jdGlvbiByZWdpc3RlcihfcmVmMiwgdXNlcikgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0OwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGNvbW1pdCgnYXV0aF9yZXF1ZXN0Jyk7CiAgICAgICAgYXhpb3MoewogICAgICAgICAgdXJsOiAnaHR0cHM6Ly9ncmFzcGVyYXBpLmF6dXJld2Vic2l0ZXMubmV0L2FwaS92MS9Vc2Vycy9yZWdpc3RlcicsCiAgICAgICAgICBkYXRhOiB1c2VyLAogICAgICAgICAgbWV0aG9kOiAnUE9TVCcKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgICB2YXIgdG9rZW4gPSByZXNwLmRhdGEudG9rZW47CiAgICAgICAgICB2YXIgdXNlciA9IHJlc3AuZGF0YS51c2VyOwogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgdG9rZW4pOyAvLyBBZGQgdGhlIGZvbGxvd2luZyBsaW5lOgoKICAgICAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSB0b2tlbjsKICAgICAgICAgIGNvbW1pdCgnYXV0aF9zdWNjZXNzJywgdG9rZW4sIHVzZXIpOwogICAgICAgICAgcmVzb2x2ZShyZXNwKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICBjb21taXQoJ2F1dGhfZXJyb3InLCBlcnIpOwogICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7CiAgICAgICAgICByZWplY3QoZXJyKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoX3JlZjMpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdDsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBjb21taXQoJ2xvZ291dCcpOwogICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpOwogICAgICAgIGRlbGV0ZSBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddOwogICAgICAgIHJlc29sdmUoKTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBnZXR0ZXJzOiB7CiAgICBpc0xvZ2dlZEluOiBmdW5jdGlvbiBpc0xvZ2dlZEluKHN0YXRlKSB7CiAgICAgIHJldHVybiAhIXN0YXRlLnRva2VuOwogICAgfSwKICAgIGF1dGhTdGF0dXM6IGZ1bmN0aW9uIGF1dGhTdGF0dXMoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnN0YXR1czsKICAgIH0KICB9Cn0pOw=="},{"version":3,"sources":["C:/Users/mmak/KJSP/kwproductsapp/src/store/index.js"],"names":["Vue","Vuex","axios","use","Store","state","status","token","localStorage","getItem","user","pagenum","numpages","mutations","auth_request","auth_success","auth_error","logout","updatePageNum","num","console","log","updatePageCount","pagecount","actions","login","commit","Promise","resolve","reject","url","data","method","then","resp","setItem","defaults","headers","common","catch","err","removeItem","register","getters","isLoggedIn","authStatus"],"mappings":"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","sourcesContent":["import Vue from 'vue'\r\nimport Vuex from 'vuex'\r\nimport axios from 'axios'\r\n\r\nVue.use(Vuex)\r\n\r\nexport default new Vuex.Store({\r\n\tstate: {\r\n\t\tstatus: '',\r\n\t\ttoken: localStorage.getItem('token') || '',\r\n        user: {},\r\n        pagenum: '1',\r\n        numpages: '0'\r\n\t},\r\n\tmutations: {\r\n\t\tauth_request(state) {\r\n\t\t\tstate.status = 'loading'\r\n\t\t},\r\n\t\tauth_success(state, token, user) {\r\n\t\t\tstate.status = 'success'\r\n\t\t\tstate.token = token\r\n\t\t\tstate.user = user\r\n\t\t},\r\n\t\tauth_error(state) {\r\n\t\t\tstate.status = 'error'\r\n\t\t},\r\n\t\tlogout(state) {\r\n\t\t\tstate.status = ''\r\n\t\t\tstate.token = ''\r\n        },\r\n        updatePageNum(state, num){\r\n            console.log(num)\r\n            state.pagenum = num\r\n        },\r\n        updatePageCount(state, pagecount){\r\n            console.log(pagecount)\r\n            state.numpages = pagecount\r\n        }\r\n\t},\r\n\tactions: {\r\n\t\tlogin({\r\n\t\t\tcommit\r\n\t\t}, user) {\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\tcommit('auth_request')\r\n\t\t\t\taxios({\r\n\t\t\t\t\t\turl: 'https://grasperapi.azurewebsites.net/api/v1/Users/authenticate',\r\n\t\t\t\t\t\tdata: user,\r\n\t\t\t\t\t\tmethod: 'POST'\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(resp => {\r\n\t\t\t\t\t\tconst token = resp.data.token\r\n\t\t\t\t\t\tconst user = resp.data.user\r\n\t\t\t\t\t\tlocalStorage.setItem('token', token)\r\n                        // Add the following line:\r\n\t\t\t\t\t\taxios.defaults.headers.common['Authorization'] = token\r\n\t\t\t\t\t\tcommit('auth_success', token, user)\r\n\t\t\t\t\t\tresolve(resp)\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {\r\n                        commit('auth_error')\r\n\t\t\t\t\t\tlocalStorage.removeItem('token')\r\n\t\t\t\t\t\treject(err)\r\n\t\t\t\t\t})\r\n\t\t\t})\r\n\t\t},\r\n\t\tregister({\r\n\t\t\tcommit\r\n\t\t}, user) {\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\tcommit('auth_request')\r\n\t\t\t\taxios({\r\n\t\t\t\t\t\turl: 'https://grasperapi.azurewebsites.net/api/v1/Users/register',\r\n\t\t\t\t\t\tdata: user,\r\n\t\t\t\t\t\tmethod: 'POST'\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(resp => {\r\n\t\t\t\t\t\tconst token = resp.data.token\r\n\t\t\t\t\t\tconst user = resp.data.user\r\n\t\t\t\t\t\tlocalStorage.setItem('token', token)\r\n\t\t\t\t\t\t// Add the following line:\r\n\t\t\t\t\t\taxios.defaults.headers.common['Authorization'] = token\r\n\t\t\t\t\t\tcommit('auth_success', token, user)\r\n\t\t\t\t\t\tresolve(resp)\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\tcommit('auth_error', err)\r\n\t\t\t\t\t\tlocalStorage.removeItem('token')\r\n\t\t\t\t\t\treject(err)\r\n\t\t\t\t\t})\r\n\t\t\t})\r\n\t\t},\r\n\t\tlogout({\r\n\t\t\tcommit\r\n\t\t}) {\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\tcommit('logout')\r\n\t\t\t\tlocalStorage.removeItem('token')\r\n\t\t\t\tdelete axios.defaults.headers.common['Authorization']\r\n\t\t\t\tresolve()\r\n\t\t\t})\r\n\t\t}\r\n\t},\r\n\tgetters: {\r\n\t\tisLoggedIn: state => !!state.token,\r\n\t\tauthStatus: state => state.status,\r\n\t}\r\n})"]}]}